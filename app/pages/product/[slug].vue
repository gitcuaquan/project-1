<template>
  <SharedModuleBreadcrumb :data="breadcrumb" />
  <div class="container mt-3">
    <!-- Main Product Section -->
    <div class="row bg-white pt-3 rounded">
      <!-- Product Images -->
      <div class="col-lg-5 col-md-6">
        <div class="sticky-top" style="top: 50px; z-index: 0">
          <ProductModuleImg :images="productImages" />

          <p class="text-muted mt-2 small">
            M√†u m√£ s·∫£n ph·∫©m c√≥ th·ªÉ thay ƒë·ªïi theo l√¥ h√†ng
          </p>
        </div>
      </div>

      <!-- Product Info -->
      <div class="col-lg-7 col-md-6">
        <div class="product-info">
          <!-- Brand -->
          <p class="text-muted mb-2">
            Th∆∞∆°ng hi·ªáu: <span class="text-primary fw-bold">VKENKO</span>
          </p>

          <!-- Product Title -->
          <h1 class="h3 fw-bold mb-3 text-dark">
            VI√äN U·ªêNG H·ªñ TR·ª¢ C·∫¢I THI·ªÜN TINH TR·∫†NG LO √ÇU, C·∫¢I THI·ªÜN GI·∫§C NG·ª¶
            ASHAMI GOLD VKENKO 60V
          </h1>

          <!-- Rating and Reviews -->
          <div class="d-flex align-items-center gap-2 mb-3">
            <span class="text-muted me-2">00049150</span>
            <div class="me-3 d-flex gap-1 align-items-center">
              <Star :size="16" class="text-warning" :stroke-width="1" />
              <span class="fw-bold">5</span>
            </div>
            <span class="text-muted me-3">5 ƒë√°nh gi√°</span>
            <span class="text-muted">21 b√¨nh lu·∫≠n</span>
          </div>

          <!-- Price -->
          <div class="price-section mb-4">
            <div class="d-flex align-items-center mb-2">
              <h2 class="h2 text-primary fw-bold mb-0 me-3">937.500ƒë</h2>
              <span class="text-muted">/ H·ªôp</span>
            </div>
            <p class="text-muted text-decoration-line-through mb-3">
              1.250.000ƒë
            </p>
          </div>

          <!-- Product Details Table -->
          <div class="table-responsive mb-4">
            <table class="table table-borderless">
              <tbody>
                <tr>
                  <td class="text-muted py-2" style="width: 40%">
                    Ch·ªçn ƒë∆°n v·ªã t√≠nh
                  </td>
                  <td class="py-2">
                    <button class="btn btn-outline-primary btn-sm rounded-pill">
                      H·ªôp
                    </button>
                  </td>
                </tr>
                <tr>
                  <td class="text-muted py-2">T√™n ch√≠nh h√£ng</td>
                  <td class="py-2">Th·ª±c ph·∫©m b·∫£o v·ªá s·ª©c kh·ªèe ASHAMI GOLD</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">Danh m·ª•c</td>
                  <td class="py-2">
                    <span class="badge bg-light text-primary"
                      >Th·∫ßn kinh n√£o</span
                    >
                  </td>
                </tr>
                <tr>
                  <td class="text-muted py-2">S·ªë ƒëƒÉng k√Ω</td>
                  <td class="py-2">548/2025/ƒêKSP</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">D·∫°ng b√†o ch·∫ø</td>
                  <td class="py-2">Vi√™n nang c·ª©ng</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">Quy c√°ch</td>
                  <td class="py-2">H·ªôp 60 Vi√™n</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">Xu·∫•t x·ª© th∆∞∆°ng hi·ªáu</td>
                  <td class="py-2">Nh·∫≠t B·∫£n</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">Nh√† s·∫£n xu·∫•t</td>
                  <td class="py-2">GENSEI CO.,LTD</td>
                </tr>
                <tr>
                  <td class="text-muted py-2">N∆∞·ªõc s·∫£n xu·∫•t</td>
                  <td class="py-2">Nh·∫≠t B·∫£n</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Certificate Link -->
          <div class="mb-4">
            <a href="#" class="text-primary text-decoration-none">
              <i class="fas fa-certificate me-1"></i>
              Xem gi·∫•y c√¥ng b·ªë s·∫£n ph·∫©m
            </a>
          </div>

          <!-- Ingredients -->
          <div class="ingredients-section">
            <h6 class="fw-bold mb-3">Th√†nh ph·∫ßn</h6>
            <p class="small text-muted">
              Hoa c√∫c t√≠m, Y-amino-butyric acid,
              <span class="text-primary">Ch√πm ng√¢y</span>,
              <span class="text-primary">L-theanine</span>, Chi·∫øt xu·∫•t l√° d√¢u
              t·∫±m, <span class="text-primary">Hoa hi√™n</span>,
              <span class="text-primary">Glycine</span>,
              <span class="text-primary">L-Tryptophan</span>, D·∫ßu c√° tinh luy·ªán,
              D·∫ßu c√¢y Ban √Çu, <span class="text-primary">T·∫ßm sen</span>, R·ªÖ n·ªØ
              lang, Hoa c√∫c v√†ng, L√≤ h·ªôi, B·ªôt chi·∫øt xu·∫•t t·ª´ h·∫°t ƒë·∫≠u m√®o r·ª´ng, L√°
              la b√¥ ma, <span class="text-primary">Nhan S√¢m</span>,
              <span class="text-primary">ƒê√¥ng tr√πng h·∫° th·∫£o</span>,
              <span class="text-primary">Vitamin B1</span>,
              <span class="text-primary">Vitamin B2</span>, Vitamin B6, Chi·∫øt
              xu·∫•t hoa ngh·ªá t√¢y
            </p>
          </div>

          <div
            id="action"
            class="row mt-3 bg-white align-items-center pb-3 g-3"
          >
            <div class="col-md-5">
              <div class="d-flex align-items-center gap-3">
                <div>Ch·ªçn s·ªë l∆∞·ª£ng</div>
                <UiBtnGroup />
              </div>
            </div>
            <div class="col-md-6">
              <button id="add-to-cart" class="btn btn-primary btn-lg px-5">
                Th√™m v√†o gi·ªè h√†ng <ShoppingBag />
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Main Product Section -->
    <h5 class="mt-5 text-capitalize">C√≥ th·ªÉ b·∫°n c≈©ng th√≠ch</h5>
    <ProductModuleSliderItem />
  </div>
</template>

<script setup lang="ts">
import type { ProjectConfig } from "~/model";
import type { ITemsTapmed } from "~/model/SSE";
const { $appServices } = useNuxtApp();
const route = useRoute();
const breadcrumb = ref<Array<ProjectConfig.BreadcrumbItem>>([
  { label: "ƒê·∫∑t h√†ng nhanh", to: "/quick-order" },
  { label: "Th·∫ßn kinh n√£o" },
]);


// Product images
const productImages = ref([
  "https://placehold.co/800x800/000000/5682B1.png", // Main product image
  "https://placehold.co/800x800/000000/FFE8DB.png", // Package front
  "https://placehold.co/800x800/000000/AE75DA.png", // Package back with details
  "https://placehold.co/800x800/000000/309272.png", // Certificate or additional info
  "https://placehold.co/800x800/000000/0046FF.png", // Certificate or additional info
  "https://placehold.co/800x800/000000/1E93AB.png", // Certificate or additional info
]);

// SEO Meta
const { data: detailProduct } = await useAsyncData("product-details", async () => {
  const slug = route.params.slug as string;
  return await $appServices.items.getItemById(slug);
});

// üß† Reactive useHead ‚Äî s·∫Ω t·ª± update khi detailProduct.value ƒë·ªïi
useHead(() => ({
  title: detailProduct.value
    ? `${detailProduct.value.ten_vt} - Mua ngay t·∫°i TAPMED`
    : "Chi ti·∫øt s·∫£n ph·∫©m - TAPMED",
  meta: [
    {
      name: "description",
      content: detailProduct.value?.ten_vt || "",
    },
  ],
}));
</script>

<style scoped>
.price-section .h2 {
  font-size: 2.5rem;
}

.badge.bg-danger {
  background: linear-gradient(45deg, #dc3545, #ff6b7a) !important;
}

.table td {
  border: none;
  padding: 0.75rem 0.5rem;
}

.table tr:not(:last-child) {
  border-bottom: 1px solid #f8f9fa;
}

.ingredients-section {
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 0.5rem;
  border-left: 4px solid var(--bs-primary);
}

@media (max-width: 768px) {
  .price-section .h2 {
    font-size: 2rem;
  }

  .table-responsive {
    font-size: 0.9rem;
  }
  #add-to-cart {
    width: 100%;
  }
  #action {
    position: sticky;
    bottom: 0;
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
  }
}
/* Hide number input arrows for Chrome, Safari, Edge, Opera */
.input-number::-webkit-outer-spin-button,
.input-number::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Hide number input arrows for Firefox */
.input-number[type="number"] {
  -moz-appearance: textfield;
}
.input-number {
  width: 45px;
}
.small {
  font-size: 0.875rem;
}
</style>
